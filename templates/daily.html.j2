<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>futuretech-stock — Daily Top 10 ({{ date | default('', true) }})</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <!-- daily.css は render.py が site/assets/daily.css へコピーします -->
  <link rel="stylesheet" href="../assets/daily.css">
  <script type="application/ld+json">{{ schema_json }}</script>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <h1>Daily Top 10 — {{ date }}</h1>
      <p class="muted">AI · Robotics · Space — fair scoring across sizes. US market timing.</p>
    </header>

    <section class="grid">
    {% for item in top10 %}
      {% set idx = loop.index %}
      {% set pts = item.score_pts|int %}
      {% set d = item.deltas or {} %}
      {% set c = item.score_components or {} %}
      <article class="card" id="card-{{ idx }}">
        <div class="row">
          <div class="left">
            <div class="rank-rocket rank{{ idx }}"><span class="medal">#{{ idx }}</span></div>
            <div class="idbox">
              <div class="sym">{{ item.symbol }}</div>
              <div class="name">{{ item.name }}</div>
            </div>
          </div>
          <div class="score" aria-label="final score">{{ pts }}</div>
        </div>

        <div class="price-row" role="group" aria-label="price momentum">
          {% set d1=d.get('d1') %}{% set d5=d.get('d5') %}{% set d20=d.get('d20') %}
          {% set cls1 = (d1 is not none) and ('up' if d1>0 else ('down' if d1<0 else 'neutral')) or 'neutral' %}
          {% set cls5 = (d5 is not none) and ('up' if d5>0 else ('down' if d5<0 else 'neutral')) or 'neutral' %}
          {% set cls20= (d20 is not none) and ('up' if d20>0 else ('down' if d20<0 else 'neutral')) or 'neutral' %}
          <div class="pch {{ cls1 }}"><span class="k">1D</span><span class="v">{{ d1 is not none and ("%+.2f%%"|format(d1)) or "—" }}</span></div>
          <div class="pch {{ cls5 }}"><span class="k">1W</span><span class="v">{{ d5 is not none and ("%+.2f%%"|format(d5)) or "—" }}</span></div>
          <div class="pch {{ cls20 }}"><span class="k">1M</span><span class="v">{{ d20 is not none and ("%+.2f%%"|format(d20)) or "—" }}</span></div>
        </div>

        <h4 class="h4">Breakdown</h4>
        <table class="tbl">
          <thead>
            <tr><th>Component</th><th class="right">Value</th><th class="right">Weight</th><th class="right">Points</th></tr>
          </thead>
          <tbody>
            {% set w = item.score_weights or {} %}
            {% for k in ["dii","news","trends_breakout","volume_anomaly"] %}
            {% set nm = {"dii":"DII model","news":"News coverage","trends_breakout":"Trend breakout","volume_anomaly":"Volume anomaly"}[k] %}
            {% set val = c.get(k,0) %}
            {% set wk = w.get(k,0) %}
            {% set pts_k = (val*(wk))*1000 %}
            <tr>
              <td>{{ nm }}</td>
              <td class="right">{{ "%.3f"|format(val) }}</td>
              <td class="right">{{ "%.0f"|format(wk*100) }}%</td>
              <td class="right">{{ "%.0f"|format(pts_k) }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        <p class="muted small">Final score = weighted average of <b>Volume anomaly</b>, <b>Trend breakout</b>, <b>News coverage</b>, and <b>DII</b>. (0–1000 pts)</p>
      </article>
    {% endfor %}
    </section>

    <footer class="footer">
      <small class="muted">© {{ date[:4] }} futuretech-stock</small>
    </footer>
  </div>
</body>
</html>
