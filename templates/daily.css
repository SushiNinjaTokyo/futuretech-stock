:root{
  --bg:#ffffff; --fg:#0f172a; --muted:#64748b; --border:#e5e7eb;
  --gold:#f6c453; --silver:#cdd2d8; --bronze:#f4a261;
  --soft:#f8fafc; --ring:#e2e8f0;

  --up-bg:#ecfdf5; --up-fg:#065f46; --up-bd:#10b98133;
  --dn-bg:#fef2f2; --dn-fg:#7f1d1d; --dn-bd:#ef444433;
  --nz-fg:#6b7280; --chip-bg:#eef2f7;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--bg);color:var(--fg)}

.wrap{max-width:1100px;margin:0 auto;padding:16px 16px 24px}
header{margin-bottom:14px}
h1{font-size:20px;margin:0 0 6px;letter-spacing:-0.2px}
.sub{color:var(--muted);font-size:12px}

/* grid */
.grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:12px}
@media (min-width:900px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}

/* card */
.card{position:relative;border:1px solid var(--border);border-radius:16px;padding:12px 12px 14px;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.03)}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
.left{display:flex;align-items:center;gap:10px;min-width:0}

/* ===== Rank visual ===== */
.rank-rocket{
  width:64px;height:64px;border-radius:999px;flex:0 0 auto;
  display:flex;align-items:center;justify-content:center;position:relative;isolation:isolate;
  overflow:hidden;
  box-shadow:0 10px 24px rgba(0,0,0,.08) inset, 0 6px 14px rgba(0,0,0,.06);
}
/* medals color fill */
.rank1{ background:radial-gradient(120% 120% at 30% 30%, #fff6d6 0%, var(--gold) 45%, #d59b2b 100%); }
.rank2{ background:radial-gradient(120% 120% at 30% 30%, #ffffff 0%, var(--silver) 50%, #9ea3a9 100%); }
.rank3{ background:radial-gradient(120% 120% at 30% 30%, #fff0e5 0%, var(--bronze) 50%, #e4823f 100%); }
.rankN{ display:none; } /* hide rocket after 4th */

/* badge (4th or later) */
.rank-badge{
  width:36px;height:36px;border-radius:999px;flex:0 0 auto;
  display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:13px;letter-spacing:.2px;color:#111827;background:#f3f4f6;border:1px solid var(--border);
}

/* rocket icon */
.rocket{ width:30px;height:30px; filter:drop-shadow(0 2px 4px rgba(0,0,0,.18)); }
.flame{ transform-origin:12px 20px; }

/* ===== Rank #1: hero animation (bigger flame + plume) ===== */
.rank-rocket.rank1{ overflow:visible; } /* allow flame/plume to overflow */

.rank1 .rocket{
  animation:lift-hero 1.4s ease-in-out infinite;
  filter:drop-shadow(0 8px 16px rgba(0,0,0,.25))
         drop-shadow(0 0 10px rgba(255,184,0,.55));
}
.rank1 .flame{
  animation:flame-burst .5s ease-in-out infinite;
  transform:scale(1.45); /* physically bigger flame */
  filter:drop-shadow(0 0 8px rgba(255,140,0,.85))
         drop-shadow(0 0 18px rgba(255,210,120,.65));
}
/* exhaust plume behind the rocket */
.rank-rocket.rank1::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:-10px;
  width:18px; height:44px;
  transform:translateX(-50%);
  background:radial-gradient(ellipse at 50% 0%,
    rgba(255,220,120,.95) 0%,
    rgba(255,165,60,.80) 40%,
    rgba(255,100,30,.45) 65%,
    rgba(255,100,30,0) 80%);
  filter:blur(4px);
  animation:plume .6s ease-in-out infinite;
  z-index:-1;
}
@keyframes lift-hero{
  0%   { transform:translateY(0)    rotate(-8deg) scale(1.02); }
  50%  { transform:translateY(-9px) rotate(0deg)  scale(1.08); }
  100% { transform:translateY(0)    rotate(-8deg) scale(1.02); }
}
@keyframes flame-burst{
  0%,100% { transform:scale(1.45); opacity:1; }
  50%     { transform:scale(0.9);  opacity:.8; }
}
@keyframes plume{
  0%   { transform:translate(-50%,0)   scaleY(0.9);  opacity:.95; }
  50%  { transform:translate(-50%,7px) scaleY(1.35); opacity:.7;  }
  100% { transform:translate(-50%,0)   scaleY(0.9);  opacity:.95; }
}

/* Rank #2 (softer) */
.rank2 .rocket{ animation:lift 1.8s ease-in-out infinite; }
.rank2 .flame{ animation:flicker .9s ease-in-out infinite; }
@keyframes lift{
  0%{ transform:translateY(0) rotate(-4deg) }
  50%{ transform:translateY(-3px) rotate(0) }
  100%{ transform:translateY(0) rotate(-4deg) }
}
@keyframes flicker{
  0%,100%{ opacity:.95; transform:scale(1); }
  50%{ opacity:.7; transform:scale(.88); }
}

/* Rank #3 (idle wobble) */
.rank3 .rocket{ animation:prep 1.6s ease-in-out infinite; }
.rank3 .flame{ opacity:.0; }
@keyframes prep{
  0%{ transform:translateY(0) rotate(-2deg) }
  50%{ transform:translateY(-1px) rotate(1deg) }
  100%{ transform:translateY(0) rotate(-2deg) }
}

/* text */
.id-block{min-width:0}
.symbol{font-size:18px;font-weight:800;letter-spacing:.2px;line-height:1.15;white-space:nowrap}
.name{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:60vw}
@media (min-width:900px){ .name{max-width:420px} }

/* score (right side) */
.score{text-align:right;display:flex;flex-direction:column;align-items:flex-end;line-height:1.05;margin-left:auto}
.score .num{
  font-size:28px;font-weight:900;letter-spacing:-.4px;
  padding:6px 10px;border-radius:12px;border:1px solid var(--ring);
  background:linear-gradient(180deg,#ffffff 0%,#f9fafb 100%);
}
.score .den{font-size:11px;color:var(--muted);margin-top:2px}

/* price chips in one row */
.price-row{
  display:flex;align-items:center;gap:6px;margin-top:8px;flex-wrap:nowrap;
  overflow:hidden;
}
.pch{
  flex:1 1 0%; min-width:0;
  display:flex;align-items:center;justify-content:center;gap:6px;
  padding:6px 8px;border-radius:999px;border:1px solid var(--border);
  font-size:11px;line-height:1; background:var(--chip-bg); color:#111;
  white-space:nowrap;
}
.pch .k{color:var(--muted)}
.pch.up{border-color:var(--up-bd);background:var(--up-bg);color:var(--up-fg)}
.pch.down{border-color:var(--dn-bd);background:var(--dn-bg);color:var(--dn-fg)}
.pch.neutral{color:var(--nz-fg)}
.delta{font-variant-numeric:tabular-nums}

/* medals (Trends/News top3) */
.medals{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}
.medal{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:#fff;border-radius:999px;padding:4px 8px;line-height:1}
.medal .label{font-size:11px;letter-spacing:.2px}
.medal .kind{font-size:11px;color:#111;text-transform:capitalize}
.medal.gold{border-color:#f59e0b33;box-shadow:0 0 0 2px #f59e0b1a inset}
.medal.silver{border-color:#9ca3af33;box-shadow:0 0 0 2px #9ca3af1a inset}
.medal.bronze{border-color:#fb923c33;box-shadow:0 0 0 2px #fb923c1a inset}
.medal .emoji{font-size:14px}

/* segmented tabs */
.tabs{margin-top:12px}
.seg{display:inline-flex;gap:0;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:rgba(243,244,246,.6);backdrop-filter:saturate(1.1) blur(2px)}
.seg .segbtn{
  appearance:none;border:0;margin:0;padding:8px 12px;background:transparent;cursor:pointer;
  font-size:12px;color:#111;line-height:1;display:flex;align-items:center;gap:8px;
}
.seg .segbtn:focus{outline:none;box-shadow:inset 0 0 0 2px rgba(0,0,0,.08)}
.seg .segbtn[aria-pressed="true"]{
  background:#fff; font-weight:700; box-shadow:inset 0 0 0 1px var(--border);
}
.seg .ico{font-size:14px;opacity:.9}

.tab{display:none}
.tab.active{display:block}
.chart{width:100%;border:1px solid var(--border);border-radius:10px}

/* table */
.table{width:100%;border-collapse:collapse;margin-top:6px}
.table th,.table td{border-bottom:1px solid var(--border);padding:6px 8px;font-size:12px;text-align:left}
.table th{color:var(--muted);font-weight:600}
.right{text-align:right}
.muted{color:var(--muted)}
details{margin-top:8px;background:#fafafa;border:1px solid var(--border);border-radius:8px;padding:8px 10px}
details>summary{cursor:pointer;font-size:12px;color:#111;user-select:none}

.kv{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:8px}
.kv div{font-size:12px;background:#fff;border:1px solid var(--border);border-radius:8px;padding:6px 8px}
.kv .k{color:var(--muted)}
.note{margin-top:8px;font-size:11px;color:var(--muted)}

/* small screens tweaks */
@media (max-width:420px){
  .symbol{font-size:16px}
  .rank-rocket{width:56px;height:56px}
  .rocket{width:28px;height:28px}
  .score .num{font-size:24px}
  .pch{padding:5px 6px;font-size:10.5px}
  .name{max-width:58vw}
}
